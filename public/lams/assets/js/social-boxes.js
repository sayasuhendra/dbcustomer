var SocialBoxes;SocialBoxes=(function($){"use strict";var config,getSocialBoxesOrder,handleCollapsible,handleSomeTweaks,handleSortable,handleSortableOnMobile,init,setSerialisedOutput;config={sortable:true,sortableContainer:".sortable-socialboxes",columnContainer:".column",serialisedOutputContainer:"#serialised-utput",collapsible:true};init=function(options){$.extend(config,options);handleSortable();handleSortableOnMobile();handleSomeTweaks();setSerialisedOutput();handleCollapsible();};handleSortable=function(){if(config.sortable===true){$(config.sortableContainer+" "+ config.columnContainer).sortable({cloneHelperSize:true,connectWith:config.sortableContainer+" "+ config.columnContainer,items:".social-box",opacity:0.75,cursor:"move",cancel:".tools",forceHelperSize:true,forcePlaceholderSize:true,placeholder:"ui-state-highlight",revert:200,tolerance:"pointer"});$(config.sortableContainer+" "+".social-box").addClass("sortable ui-helper-clearfix").find(".header, header").end().find(".body");$(config.sortableContainer+" "+ config.columnContainer).disableSelection();$(config.sortableContainer+" "+ config.columnContainer).on("sortstop",function(event,ui){setSerialisedOutput();});}};handleSortableOnMobile=function(){$(window).resize(function(){if($(window).width()<=768){$(config.sortableContainer+" "+ config.columnContainer).sortable("disable");}else{$(config.sortableContainer+" "+ config.columnContainer).sortable("enable");}});};handleSomeTweaks=function(){$(config.sortableContainer).find("input,textarea,button,select,option").on("click.sortable mousedown.sortable",function(e){e.target.focus();});};setSerialisedOutput=function(){if(window.JSON){$(config.serialisedOutputContainer).val(JSON.stringify(SocialBoxes.getSocialBoxesOrder()));return;}else{$(config.serialisedOutputContainer).val("JSON browser support required for this demo.");return;}};getSocialBoxesOrder=function(){var finalOrder;if(config.sortable===true){finalOrder=[];$(config.sortableContainer+" "+ config.columnContainer).each(function(index,value){var colid,generalOrder,i,n,order,v;colid=value.id;generalOrder=[];order=$(config.sortableContainer+" #"+ colid+ config.columnContainer).sortable("toArray");i=0;n=order.length;while(i<n){v=$(config.sortableContainer+" "+"#"+ order[i]).find(".body").is(":visible");generalOrder[i]=order[i]+":"+ v;i++;}
finalOrder.push(generalOrder);});return finalOrder;}else{return false;}};handleCollapsible=function(){var iconHeader;if(config.collapsible===true){iconHeader=$(".social-box").find("header .icon-chevron-down, .header .icon-chevron-down");iconHeader.css("cursor","pointer").click(function(){var box,boxBody,boxFooter;$(this).toggleClass("icon-chevron-down").toggleClass("icon-chevron-up");box=$(this).parents(".social-box:first");boxBody=box.find(".body");boxFooter=box.find(".footer, footer");if(boxBody.is(":visible")){boxBody.slideUp(400,function(){setSerialisedOutput();});boxFooter.slideUp();}else{boxBody.slideDown(400,function(){setSerialisedOutput();});boxFooter.slideDown();}});}};return{init:init,getSocialBoxesOrder:getSocialBoxesOrder};})(jQuery);